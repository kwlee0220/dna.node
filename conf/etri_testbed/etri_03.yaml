id: etri:03

camera:
  uri: output/extended/etri_03.mp4
  sync: False
  init_ts: 0

tracker:
  drop_border_detections: true
  draw: ["tracks", "track_zones", "exit_zones", "trails"]
  track_zones:
    # - [[161, 88], [405, 63], [1279, 307], [1278, 958], [968, 959], [309, 265], [223, 238], [166, 125]]
    - [[162, 97], [416, 71], [1279, 307], [1278, 958], [968, 959], [309, 265], [223, 238], [166, 125]]
  magnifying_zones:
    - [60, 30, 700, 670]
  exit_zones:
    # - [[143, 91], [415, 63], [378, 51], [140, 69]]  # 윗쪽 방향
    - [[149, 99], [428, 71], [378, 51], [140, 69]]
    - [[165, 93], [240, 241], [150, 254], [104, 88]] # 정문 방향

publishing:
  refine_tracks:
    buffer_size: 15
    buffer_timeout: 2
  min_path_length: 20
  attach_world_coordinates:
    camera_geometry: conf/etri_testbed/localization_etri_testbed.json
    camera_index: 2
    contact_point: NearBottom
  zone_pipeline:
    draw: true
    zones:
      A: [[164, 114], [481, 84]]    # 윗쪽 방향
      B: [[488, 514], [1041, 230]]  # 7동 입구 방향
      C: [[155, 116], [196, 119], [262, 234], [217, 265], [155, 116]]    # 정문 방향
  # reid_features:
  #   model_file: models/deepsort/model640.pt
  #   distinct_distance: 0.1
  #   min_crop_size: 60x35
  #   max_iou: 0.2

  publish_kafka:
    publish_node_tracks:
      kafka_brokers: [localhost:9092]
      topic: 'node-tracks'
    # publish_track_features:
    #   kafka_brokers: [localhost:9092]
    #   topic: 'track-features'